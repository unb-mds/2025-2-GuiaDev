<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Guias — GuiaDev</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <header class="site-header">
        <div class="container header-inner">
            <img src="../assets/images/logo.svg" alt="GuiaDev" height="40" />
            <span class="brand-text">GuiaDev</span>
            <nav id="site-nav" class="site-nav">
                <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="diagrama-c4.html" rel="noopener">Diagrama C4 (PDF)</a></li>
          <li><a href="" class="indisponivel">Milestones</a></li>
          <li><a href="sobre.html">Sobre</a></li>
          <li><a href="como-contribuir.html">Como contribuir</a></li>
          <li><a href="guias.html">Docs</a></li>
          <li><a href="" class="indisponivel">Roadmap</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main" class="container">
        <section class="hero">
            <h1>Guias</h1>
            <p class="lede">Coleção de guias e tutoriais para o curso. Posso gerar automaticamente uma lista a partir
                dos arquivos Markdown no repositório.</p>
        </section>

        <section class="container--narrow">
            <h2>Índice de guias</h2>
            <p>Lista automática dos guias detectados na pasta <code>Docs/</code>. Cada item mostra um link para a versão
                renderizada (página HTML). A coluna <strong>Status</strong> indica se a versão renderizada está
                acessível pelo servidor.</p>

            <table class="guides-table">
                    <thead>
                        <tr>
                            <th>Arquivo</th>
                            <th>Descrição</th>
                            <th>Disponibilidade</th>
                        </tr>
                    </thead>
                    <tbody id="guides-body"></tbody>
                </table>
    </main>
    </section>
    </main>

    <script>
        const docsFiles = {
            'Docs/docsCheck-list.md': 'Checklist de documentação',
            'Docs/documento-de-requisitos.md': 'Documento de requisitos',
            'CODE_OF_CONDUCT.md': 'Regras de contribuição',
            'teste': '-',
        };

        const mapToRendered = {
            'Docs/docsCheck-list.md': 'docs-checklist.html',
            'Docs/documento-de-requisitos.md': 'documento-de-requisitos.html',
            'CODE_OF_CONDUCT.md': 'code-of-conduct.html'
        
        };

        function markAvailable(cell, href) {
            cell.classList.add('available');
            cell.textContent = 'Disponível';
            cell.innerHTML = `<a href="${href}">Disponível</a>`;
        }
        function markError(cell) {
            cell.classList.add('error');
            cell.textContent = 'Indisponível';
        }

        const tbody = document.getElementById('guides-body');
        for (const [path, desc] of Object.entries(docsFiles)) {
            const tr = document.createElement('tr');
            const tdFile = document.createElement('td');
            tdFile.textContent = path;
            const tdDesc = document.createElement('td');
            tdDesc.textContent = desc;
            const tdAvail = document.createElement('td');
            tdAvail.textContent = 'Verificando...';

            tr.appendChild(tdFile);
            tr.appendChild(tdDesc);
            tr.appendChild(tdAvail);
            tbody.appendChild(tr);

            const rendered = mapToRendered[path];
            if (!rendered) {
                markError(tdAvail);
                continue;
            }

           
            const checkUrl = rendered;
            fetch(checkUrl, { method: 'HEAD' }).then(res => {
                if (res.ok) markAvailable(tdAvail, checkUrl);
                else markError(tdAvail);
            }).catch(() => {

                fetch(checkUrl).then(r2 => {
                    if (r2.ok) markAvailable(tdAvail, checkUrl);
                    else markError(tdAvail);
                }).catch(() => markError(tdAvail));
            });
        }
    </script>
    <footer class="site-footer">
        <div class="container">
            <nav>
                <ul>
                    <li><a href="changelog.html">Changelog</a></li>
                    <li><a href="security.html">Security</a></li>
                    <li><a href="privacy.html">Privacidade</a></li>
                </ul>
            </nav>
            <p class="copyright">© 2025 GuiaDev — Licença: MIT</p>
        </div>
    </footer>
</body>

</html>